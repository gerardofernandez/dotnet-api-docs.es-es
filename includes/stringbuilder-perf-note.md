<span data-ttu-id="b8721-101">El uso de la indexación basada en caracteres con la propiedad <xref:System.Text.StringBuilder.Chars%2A> puede ser muy lento en las condiciones siguientes:</span><span class="sxs-lookup"><span data-stu-id="b8721-101">Using character-based indexing with the <xref:System.Text.StringBuilder.Chars%2A> property can be extremely slow under the following conditions:</span></span>

- <span data-ttu-id="b8721-102">La instancia de <xref:System.Text.StringBuilder> es grande (por ejemplo, consta de varias decenas de miles de caracteres).</span><span class="sxs-lookup"><span data-stu-id="b8721-102">The <xref:System.Text.StringBuilder> instance is large (for example, it consists of several tens of thousands of characters).</span></span>
- <span data-ttu-id="b8721-103"><xref:System.Text.StringBuilder> es "pesado".</span><span class="sxs-lookup"><span data-stu-id="b8721-103">The <xref:System.Text.StringBuilder> is "chunky."</span></span> <span data-ttu-id="b8721-104">Es decir, las llamadas repetidas a métodos como <xref:System.Text.StringBuilder.Append%2A?displayProperty=nameWithType> han ampliado automáticamente la propiedad <xref:System.Text.StringBuilder.Capacity%2A?displayProperty=nameWithType> del objeto y le han asignado nuevos fragmentos de memoria.</span><span class="sxs-lookup"><span data-stu-id="b8721-104">That is, repeated calls to methods such as <xref:System.Text.StringBuilder.Append%2A?displayProperty=nameWithType> have automatically expanded the object's <xref:System.Text.StringBuilder.Capacity%2A?displayProperty=nameWithType> property and allocated new chunks of memory to it.</span></span>

<span data-ttu-id="b8721-105">El rendimiento se ve seriamente afectado ya que cada acceso de carácter recorre toda la lista vinculada de fragmentos para buscar el búfer correcto en el que indexar.</span><span class="sxs-lookup"><span data-stu-id="b8721-105">Performance is severely impacted because each character access walks the entire linked list of chunks to find the correct buffer to index into.</span></span>

> [!NOTE]
>  <span data-ttu-id="b8721-106">Incluso para un gran objeto <xref:System.Text.StringBuilder> pesado, el uso de la propiedad <xref:System.Text.StringBuilder.Chars%2A> para el acceso basado en índice a uno o un número reducido de caracteres tiene un efecto insignificante en el rendimiento; por lo general, es una operación **0(n)**.</span><span class="sxs-lookup"><span data-stu-id="b8721-106">Even for a large "chunky" <xref:System.Text.StringBuilder> object, using the <xref:System.Text.StringBuilder.Chars%2A> property for index-based access to one or a small number of characters has a negligible performance impact; typically, it is an **0(n)** operation.</span></span> <span data-ttu-id="b8721-107">El impacto significativo en el rendimiento se produce al recorrer en iteración los caracteres del objeto <xref:System.Text.StringBuilder>, una operación **O(n^2)**.</span><span class="sxs-lookup"><span data-stu-id="b8721-107">The significant performance impact occurs when iterating the characters in the <xref:System.Text.StringBuilder> object, which is an **O(n^2)** operation.</span></span> 

<span data-ttu-id="b8721-108">Si encuentra problemas de rendimiento al usar la indexación basada en caracteres con objetos <xref:System.Text.StringBuilder>, puede usar cualquiera de las soluciones alternativas siguientes:</span><span class="sxs-lookup"><span data-stu-id="b8721-108">If you encounter performance issues when using character-based indexing with <xref:System.Text.StringBuilder> objects, you can use any of the following workarounds:</span></span>

- <span data-ttu-id="b8721-109">Convertir la instancia de <xref:System.Text.StringBuilder> en una <xref:System.String> mediante una llamada al método <xref:System.Text.StringBuilder.ToString%2A> y después obtener acceso a los caracteres de la cadena.</span><span class="sxs-lookup"><span data-stu-id="b8721-109">Convert the <xref:System.Text.StringBuilder> instance to a <xref:System.String> by calling the <xref:System.Text.StringBuilder.ToString%2A> method, then access the characters in the string.</span></span>

- <span data-ttu-id="b8721-110">Copiar el contenido del objeto <xref:System.Text.StringBuilder> existente en un objeto <xref:System.Text.StringBuilder> nuevo de tamaño predefinido.</span><span class="sxs-lookup"><span data-stu-id="b8721-110">Copy the contents of the existing <xref:System.Text.StringBuilder> object to a new pre-sized <xref:System.Text.StringBuilder> object.</span></span> <span data-ttu-id="b8721-111">El rendimiento mejora porque el objeto <xref:System.Text.StringBuilder> nuevo no es pesado.</span><span class="sxs-lookup"><span data-stu-id="b8721-111">Performance improves because the new <xref:System.Text.StringBuilder> object is not chunky.</span></span> <span data-ttu-id="b8721-112">Por ejemplo:</span><span class="sxs-lookup"><span data-stu-id="b8721-112">For example:</span></span>

   ```csharp
   // sbOriginal is the existing StringBuilder object
   var sbNew = new StringBuilder(sbOriginal.ToString(), sbOriginal.Length);
   ```
   ```vb
   ' sbOriginal is the existing StringBuilder object
   Dim sbNew = New StringBuilder(sbOriginal.ToString(), sbOriginal.Length)
   ```
- <span data-ttu-id="b8721-113">Establezca la capacidad inicial del objeto <xref:System.Text.StringBuilder> en un valor que sea aproximadamente igual a su tamaño máximo esperado mediante una llamada al constructor <xref:System.Text.StringBuilder.%23ctor(System.Int32)>.</span><span class="sxs-lookup"><span data-stu-id="b8721-113">Set the initial capacity of the <xref:System.Text.StringBuilder> object to a value that is approximately equal to its maximum expected size by calling the <xref:System.Text.StringBuilder.%23ctor(System.Int32)> constructor.</span></span> <span data-ttu-id="b8721-114">Tenga en cuenta que esto asigna el bloque completo de memoria aunque <xref:System.Text.StringBuilder> rara vez alcanza su capacidad máxima.</span><span class="sxs-lookup"><span data-stu-id="b8721-114">Note that this allocates the entire block of memory even if the <xref:System.Text.StringBuilder> rarely reaches its maximum capacity.</span></span>
